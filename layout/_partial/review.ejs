<% if (page.review) { %>
<section class="center hidden ba mv4" itemscope itemtype="http://schema.org/Review">
  <meta itemprop="datePublished" content="<%- page.date %>">
  <span itemprop="itemReviewed" itemscope itemtype="http://schema.org/Thing">
    <meta itemprop="name" content="<%- page.review.name || page.title %>">
  </span>
  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="<%- page.author %>">
  </span>
  <span itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="<%- config.title %>">
  </span>
  <h4 class="f4 bg-near-black white mv0 pv2 ph3">Review Summary</h4>
  <div class="pa2 bt cf lh-copy">
    <p class="f6 f5-ns dib fl w-60-l ph3" itemprop="reviewBody">
      <%= page.review.summary %>
    </p>
    <ul class="stars fl w-40-l w-100 f6 pl0 outline">
      <% let total = 0; for (i in page.review.features) { let stars = parseFloat(page.review.features[i].stars); total += stars; %>
      <li class="flex items-center">
        <div class="pl3 flex-auto b"><%= page.review.features[i].name %></div>
        <div class="pr3 gold"><%- `${"&#x2605;".repeat(Math.round(stars))}` %></div>
      </li>
      <% } %>
      <li class="flex items-center outline" itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">
        <div class="pl3 flex-auto b">Overall Rating</div>
        <div class="pr3 gold" itemprop="ratingValue" content="<%- Math.round(total/page.review.features.length) %>"><%- `${"&#x2605;".repeat(Math.round(total/page.review.features.length))}` %></div>
      </li>
    </ul>
  </div>
</section>
<% } %>